<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>T(&quot;mml&quot;)</title><link rel="stylesheet" href="/timbre.js/misc/css/codemirror.css" type="text/css"><link rel="stylesheet" href="/timbre.js/misc/css/common.css" type="text/css"><link rel="shortcut icon" href="/timbre.js/favicon.ico"><script src="/timbre.js/timbre.dev.js"></script><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21613416-10']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script></head><body><div id="sidebar"><h1>timbre.js</h1><div id="index"><div id="list"><h2>Download (13.08.03)</h2><ul><li><a href="/timbre.js/timbre.js">timbre.js</a></li><li><a href="/timbre.js/timbre.dev.js">timbre.dev.js</a></li></ul><h2>Documents</h2><ul><li><a href="./">Introduction</a></li><li><a href="./GettingStarted.html">Getting Started</a></li><li><a href="./PragmaSynth.html">Pragmatic Synth</a></li><li><a href="./RecordingMode.html">Recording Mode</a></li><li><a href="./CustomObject.html">Custom Object</a></li><li><a href="./ForDevelopers.html">For Developers</a></li><li><a href="./timevalue.html">timevalue</a></li></ul><h2>Examples</h2><ul><li><a href="./beatbox.html">BeatBox</a></li><li><a href="./chord.html">ChordWork</a></li><li><a href="./satie.html">Gymnopedie</a></li><li><a href="./khoomii.html">Khoomii</a></li><li><a href="./reich.html">Reich</a></li></ul><h2>References</h2><ul><li><a href="./BaseObject.html">TimbreObject</a></li><li><a href="./Number.html">Number</a></li><li><a href="./Array.html">Array</a></li><li><a href="./Function.html">Function</a></li><li><a href="./Boolean.html">Boolean</a></li><li><a href="./Object.html">Object</a></li><li><a href="./SynthDef.html">SynthDef</a></li><li><a href="./soundbuffer.html">SoundBuffer</a></li><li><a href="./mul.html">*</a></li><li><a href="./add.html">+</a></li><li><a href="./subtract.html">-</a></li><li><a href="./div.html">/</a></li><li><a href="./audio.html">audio</a></li><li><a href="./biquad.html">biquad</a></li><li><a href="./buffer.html">buffer</a></li><li><a href="./chorus.html">chorus</a></li><li><a href="./clip.html">clip</a></li><li><a href="./comp.html">comp</a></li><li><a href="./delay.html">delay</a></li><li><a href="./dist.html">dist</a></li><li><a href="./env.html">env</a></li><li><a href="./eq.html">eq</a></li><li><a href="./fft.html">fft</a></li><li><a href="./fnoise.html">fnoise</a></li><li><a href="./gate.html">gate</a></li><li><a href="./ifft.html">ifft</a></li><li><a href="./interval.html">interval</a></li><li><a href="./lag.html">lag</a></li><li><a href="./map.html">map</a></li><li><a href="./max.html">max</a></li><li><a href="./mediastream.html">mediastream</a></li><li><a href="./midicps.html">midicps</a></li><li><a href="./midiratio.html">midiratio</a></li><li><a href="./min.html">min</a></li><li><a href="./mml.html">mml</a></li><li><a href="./mono.html">mono</a></li><li><a href="./ndict.html">ndict</a></li><li><a href="./noise.html">noise</a></li><li><a href="./osc.html">osc</a></li><li><a href="./OscGen.html">OscGen</a></li><li><a href="./pan.html">pan</a></li><li><a href="./param.html">param</a></li><li><a href="./phaser.html">phaser</a></li><li><a href="./pink.html">pink</a></li><li><a href="./pluck.html">pluck</a></li><li><a href="./PluckGen.html">PluckGen</a></li><li><a href="./rec.html">rec</a></li><li><a href="./reverb.html">reverb</a></li><li><a href="./schedule.html">schedule</a></li><li><a href="./scope.html">scope</a></li><li><a href="./script.html">script</a></li><li><a href="./selector.html">selector</a></li><li><a href="./spectrum.html">spectrum</a></li><li><a href="./tape.html">tape</a></li><li><a href="./task.html">task</a></li><li><a href="./timeout.html">timeout</a></li><li><a href="./waveshaper.html">waveshaper</a></li><li><a href="./zmap.html">zmap</a></li></ul><h2>Extra objects</h2><ul><li><a href="./mp3_decode.html">mp3_decode</a></li><li><a href="./soundfont.html">soundfont</a></li><li><a href="./audiojsonp.html">audio.jsonp</a></li><li><a href="./cosc.html">cosc</a></li><li><a href="./keyboard.html">keyboard</a></li><li><a href="./MoogFF.html">MoogFF</a></li><li><a href="./mouse.html">mouse</a></li><li><a href="./webaudioapi.html">WebAudioAPI</a></li></ul></div></div><hr><div id="footer"><a href="/timbre.js/">English</a><a href="/timbre.js/ja/">日本語</a></div></div><div id="main"><h1>T(&quot;mml&quot;)</h1>
<p><span class="label kr">KR</span><span class="label timer">TIMER</span> MML Based Scheduler</p>
<h2>Description</h2>
<p> MMLスタイルのスケジューラ。<br> 入力オブジェクトには <code>T(&quot;OscGen&quot;)</code> などの音源オブジェクトか <code>T(&quot;env&quot;)</code> を指定します。<code>noteOn</code> 時に <code>noteOn()</code> か <code>bang()</code> が呼ばれ、<code>noteOff</code> 時に <code>noteOff()</code> か <code>release()</code> が呼ばれる。</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;l8 q7 $&quot;;
mml += &quot;[d0f0&lt;c&gt; r d0f0&lt;c&gt; r r d0f0&lt;c&gt; d0f0&lt;c4&gt; d0f0b d0f0b r d0f0b r d0f0b d0f0b4&quot;;
mml += &quot; c0e0b r c0e0b r r c0e0b c0e0b4 | c0e0a c0e0a r c0e0a r c0e0a c0e0a4]&quot;;
mml += &quot; c0e0&lt;c&gt; c0e0&lt;c&gt; r c0e0&lt;c&gt; r c0e0&lt;c&gt; c0e0&lt;c4&gt;&quot;;

var gen = T(&quot;PluckGen&quot;, {env:{type:&quot;perc&quot;, r:500, lv:0.4}}).play();

T(&quot;mml&quot;, {mml:mml}, gen).start();

var osc = T(&quot;pulse&quot;, {freq:T(&quot;midicps&quot;), mul:0.15});
var env = T(&quot;asr&quot;, {a:20, r:150, lv:0.8}, osc);

T(&quot;delay&quot;, {time:250, fb:0.75, mix:0.4}, env).play();

T(&quot;mml&quot;, {mml:&quot;o7 q2 l8 $ e&gt;a&lt;c&gt;a&lt; r2&quot;}, osc, env).on(&quot;data&quot;, function(type, opts) {
  if (type === &quot;noteOn&quot;) {
    osc.freq.midi = opts.noteNum;
  }
}).start();"></div>
<h2>Properties</h2>
<ul>
<li><code>mml</code> <em>(String)</em></li>
<li><code>currentTime</code> <em>(ReadOnly Number)</em></li>
</ul>
<h2>Events</h2>
<ul>
<li><code>data</code><ul>
<li>MMLコマンドを実行したときに発生する。コールバック関数には <code>type, opts</code> が渡される。</li>
</ul>
</li>
<li><code>ended</code><ul>
<li>終端に達したときに発生する。</li>
</ul>
</li>
</ul>
<h2>MML Commands Reference</h2>
<h3><code>cdefgab</code></h3>
<p> <strong>ノート</strong> c-bがそれぞれド-シに対応。 <code>+</code> を続けるとシャープ, <code>-</code> でフラット。数字を続けると長さ指定。数字省略時は <code>l</code> コマンドの指定値を採用。</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;l8 c4c+d d+4ef f+4gg+ a4a+b &lt;c&gt;bb-aa-gg-fee-dd-c2.&quot;;

var gen = T(&quot;OscGen&quot;, {wave:&quot;saw&quot;, env:{type:&quot;perc&quot;}, mul:0.25}).play();

T(&quot;mml&quot;, {mml:mml}, gen).on(&quot;ended&quot;, function() {
  gen.pause();
  this.stop();
}).start();"></div>
<p> 長さを 0 にした場合は後に続く音の長さを基準に和音になる。</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;l2 g0&lt;c0e&gt; f0g0&lt;d&gt; e0g0&lt;c1&quot;;

var gen = T(&quot;OscGen&quot;, {wave:&quot;sin(10)&quot;, env:{type:&quot;adsr&quot;}, mul:0.2}).play();

T(&quot;mml&quot;, {mml:mml}, gen).on(&quot;ended&quot;, function() {
  gen.pause();
  this.stop();
}).start();"></div>
<h3><code>r</code></h3>
<p> <strong>休符</strong> 数値で音長指定</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;l16 o2 [ a r aa ]16&quot;;

var gen = T(&quot;OscGen&quot;, {wave:&quot;pulse&quot;, env:{type:&quot;adsr&quot;, r:150}, mul:0.25}).play();

T(&quot;mml&quot;, {mml:mml}, gen).on(&quot;ended&quot;, function() {
  gen.pause();
  this.stop();
}).start();"></div>
<h3><code>&amp;</code></h3>
<p> <strong>タイ</strong> 直前の音とつなげる</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;l8 cc ee ff g&amp;g ee dd c2&quot;;

var gen = T(&quot;OscGen&quot;, {wave:&quot;pulse&quot;, env:{type:&quot;adsr&quot;, d:500}, mul:0.25}).play();

T(&quot;mml&quot;, {mml:mml}, gen).on(&quot;ended&quot;, function() {
  gen.pause();
  this.stop();
}).start();"></div>
<h3><code>t</code></h3>
<p> <strong>テンポ</strong> テンポを指定する。値を省略したときは <code>timbre.bpm</code> の値</p>
<h3><code>l</code></h3>
<p> <strong>音長</strong> <em>(4)</em> ノート/休符で音長を省略したときの値</p>
<h3><code>o</code></h3>
<p> <strong>オクターブ</strong> <em>(4)</em> 中央が 4。略記 <code>&lt;&gt;</code> で上下できる。</p>
<h3><code>v</code></h3>
<p> <strong>ベロシティ</strong> <em>(0-15)</em> 略記 <code>()</code> で上下できる。</p>
<h3><code>q</code></h3>
<p> <strong>クォンタイズ</strong> <em>(0-8)</em> キーオフのタイミング。0 だと即時キーオフ. 8 でキーオフなし。</p>
<h3><code>[|]</code></h3>
<p> <strong>ループ</strong> <em>(2)</em> 指定区間を繰り返す。末尾で繰り返し回数を指定できる。 <code>|</code> は最終ループ時に以降をスキップする。</p>
<h3><code>$</code></h3>
<p> <strong>無限ループ</strong> MMLの終端に達したとき、この位置に戻る。</p>
<div class="codemirror" lang="timbre" source="var mml = &quot;$ cf+d+f&quot;;

var gen = T(&quot;OscGen&quot;, {wave:&quot;saw&quot;, env:{type:&quot;adsr&quot;, d:500}, mul:0.25}).play();

T(&quot;mml&quot;, {mml:mml}, gen).on(&quot;ended&quot;, function() {
  gen.pause();
  this.stop();
}).start();"></div>
<h2>See Also</h2>
<ul>
<li><a href="./OscGen.html"><code>T(&quot;OscGen&quot;)</code></a></li>
</ul>
<h2>Source</h2>
<p><a href="https://github.com/mohayonao/timbre.js/blob/master/src/objects/mml.js">https://github.com/mohayonao/timbre.js/blob/master/src/objects/mml.js</a></p>
</div><script src="/timbre.js/misc/js/jquery.js"></script><script src="/timbre.js/misc/js/codemirror.js"></script><script src="/timbre.js/misc/js/javascript.js"></script><script src="/timbre.js/misc/js/xml.js"></script><script src="/timbre.js/misc/js/htmlmixed.js"></script><script src="/timbre.js/misc/js/subcollider.js"></script><script src="/timbre.js/misc/js/common.js"></script></body></html>