(function(e){"use strict";function t(t){return r?r:(r=this,e.Object.call(this,1,t),n.fixKR(this),void 0)}if("browser"===e.envtype){var n=e.fn,r=null;n.extend(t);var i={},s=!1,o=!1,a=!1,c=function(e){for(var t=r._,n=r.cells[0],c=e.keyCode*t.mul+t.add,u=0,f=n.length;f>u;++u)n[u]=c;s=e.shiftKey,o=e.ctrlKey,a=e.altKey,i[e.keyCode]||(i[e.keyCode]=!0,r._.emit("keydown",e))},u=function(e){delete i[e.keyCode],r._.emit("keyup",e)},f=t.prototype;Object.defineProperties(f,{shiftKey:{get:function(){return s}},ctrlKey:{get:function(){return o}},altKey:{get:function(){return a}}}),f.start=function(){return window.addEventListener("keydown",c,!0),window.addEventListener("keyup",u,!0),this},f.stop=function(){return window.removeEventListener("keydown",c,!0),window.removeEventListener("keyup",u,!0),this},f.play=f.pause=function(){return this},n.register("keyboard",t);var l={90:48,83:49,88:50,68:51,67:52,86:53,71:54,66:55,72:56,78:57,74:58,77:59,188:60,76:61,190:62,186:63,81:60,50:61,87:62,51:63,69:64,82:65,53:66,84:67,54:68,89:69,55:70,85:71,73:72,57:73,79:74,48:75,80:76},d=n.getClass("ndict");n.register("ndict.key",function(e){var t=new d(e);return t.dict=l,t})}})(timbre);