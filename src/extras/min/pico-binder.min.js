(function(e){"use strict";function t(t){e.Object.call(this,2,t)}var n=e.fn;n.extend(t,e.Object);var r=t.prototype;Object.defineProperties(r,{gen:{set:function(e){"object"==typeof e&&e.process&&(this._.gen=e)},get:function(){return this._.gen}}}),r.process=function(e){var t=this._;return this.tickID!==e&&(this.tickID=e,t.gen&&(this._.gen.process(this.cells[1],this.cells[2]),n.outputSignalAR(this))),this};var i,s=function(){function t(t){var n=Math.ceil(Math.log(1.5*e.samplerate)*Math.LOG2E);this.cell=new e.fn.SignalArray(e.cellsize),this.time=125,this.feedback=.25,this.buffer=new e.fn.SignalArray(1<<n),this.mask=(1<<n)-1,this.wet=.45,this.readIndex=0,this.writeIndex=0|this.time/1e3*e.samplerate,t&&this.setParams(t)}var n=t.prototype;return n.setParams=function(t){return t.time&&(this.time=t.time,this.writeIndex=this.readIndex+(0|.001*this.time*e.samplerate)),t.feedback&&(this.feedback=t.feedback),t.wet&&(this.wet=t.wet),this},n.process=function(e,t){var n,r,i,s,o,a,c,u,f,l;for(n=this.cell,r=this.buffer,i=this.writeIndex,s=this.readIndex,o=this.feedback,c=this.wet,u=1-this.wet,f=0,l=n.length;l>f;++f)a=r[s],r[i]=e[f]-a*o,n[f]=e[f]*u+a*c,i+=1,s+=1;if(t)for(f=0;l>f;++f)e[f]=n[f];return this.writeIndex=i&this.mask,this.readIndex=s&this.mask,n},t}();"browser"===e.envtype?(window.pico||(window.pico={}),i=window.pico):"node"===e.envtype&&(global.pico||(global.pico={}),i=global.pico),i&&(Object.defineProperties(i,{env:{get:function(){return e.env}},samplerate:{get:function(){return e.samplerate}},channels:{get:function(){return e.channels}},cellsize:{get:function(){return e.cellsize}},isPlaying:{get:function(){return e.isPlaying}},DelayNode:{value:s}}),n.register("pico.js",t))})(timbre);