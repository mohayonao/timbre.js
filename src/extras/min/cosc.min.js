(function(e){"use strict";function t(t){e.Object.call(this,1,t),r.fixAR(this);var i=this._;i.freq=e(440),i.osc1=new n(i.samplerate),i.osc2=new n(i.samplerate),i.osc1.step=i.cellsize,i.osc2.step=i.cellsize,i.tmp=new r.SignalArray(i.cellsize),i.beats=.5,this.once("init",s)}var r=e.fn,n=e.modules.Oscillator;r.extend(t);var s=function(){this.wave||(this.wave="sin")},i=t.prototype;Object.defineProperties(i,{wave:{set:function(e){this._.osc1.setWave(e),this._.osc2.setWave(e)},get:function(){return this._.osc1.wave}},freq:{set:function(t){this._.freq=e(t)},get:function(){return this._.freq}},beats:{set:function(e){"number"==typeof e&&e>0&&(this._.beats=e)},get:function(){return this._.beats}}}),i.bang=function(){return this._.osc1.reset(),this._.osc2.reset(),this._.emit("bang"),this},i.process=function(e){var t=this._,n=this.cells[0];if(this.tickID!==e){this.tickID=e;var s,i=n.length,a=t.freq.process(e).cells[0][0],o=t.osc1,c=t.osc2,u=t.tmp;for(o.frequency=a-.5*t.beats,o.process(u),s=0;i>s;++s)n[s]=.5*u[s];for(c.frequency=a+.5*t.beats,c.process(u),s=0;i>s;++s)n[s]+=.5*u[s];r.outputSignalAR(this)}return this},r.register("cosc",t)})(timbre);