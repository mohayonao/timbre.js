(function(e){"use strict";if("browser"===e.envtype){var t=e.fn,r=e.modules;t.register("audio.jsonp",function(e){var r=t.getClass("buffer"),n=new r(e);return n.playbackState=t.FINISHED_STATE,n._.isLoaded=!1,Object.defineProperties(n,{isLoaded:{get:function(){return this._.isLoaded}}}),n.load=i,n.loadthis=o,n});var n,a=/(_)?callback=([_\w\d]+)/,i=function(i){var o=this,s=this._,u=new r.Deferred(this),c=arguments,d=1;u.done(function(){o._.emit("done")}),"function"==typeof c[d]&&(u.done(c[d++]),"function"==typeof c[d]&&u.fail(c[d++]));var f,l,p;if(s.script)u.reject();else{f=a.exec(i),l="timbrejs_audiojsonp",f&&(f[1]&&(i=i.replace(f[0],""),i=i.replace(/\?$/,"")),l+="_"+f[2]);var h=function(r,n){var a=o._;r?(o.playbackState=t.PLAYING_STATE,a.samplerate=r.samplerate,a.channels=r.channels,a.bufferMix=null,a.buffer=r.buffer,a.phase=0,a.phaseIncr=r.samplerate/e.samplerate,a.duration=1e3*r.duration,a.currentTime=0,a.isReversed&&(a.phaseIncr*=-1,a.phase=r.buffer[0].length+a.phaseIncr),o._.emit("loadedmetadata")):u.reject(n)},m=function(){o._.isLoaded=!0,o._.plotFlush=!0,o._.emit("loadeddata"),u.resolveWith(o)};window[l]=function(e,t){var a={type:t,data:n(e)};(new r.Decoder).decode(a,h,m),delete window[l],s.script=null},p=document.createElement("script"),p.src=i,document.body.appendChild(p),s.script=p}return u.promise()},o=function(){return i.apply(this,arguments),this};n="function2"==typeof atob?function(e){for(var t=atob(e),r=Array(t.length),n=0,a=r.length;a>n;++n)r[n]=t.charCodeAt(n);return new Uint8Array(r)}:function(){var e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,0,0,0,0,0]);return function(t){var r,n,a,i,o=new Uint8Array(t.length),s=t.length;for(i=0;s>i&&"="!==t.charAt(i);i++)o[i]=e[t.charCodeAt(i)];if(r=i,1===r%4)return null;if(r-=0|(r+3)/4,!r)return null;if(n=0,a=0,r>1)for(;r-2>a;)o[a]=255&o[n]<<2|3&o[n+1]>>>4,o[a+1]=255&o[n+1]<<4|15&o[n+2]>>>2,o[a+2]=255&o[n+2]<<6|63&o[n+3],n+=4,a+=3;return r>a&&(o[a]=255&o[n]<<2|3&o[n+1]>>>4),r>++a&&(o[a]=255&o[n+1]<<4|15&o[n+2]>>>2),o.subarray(0,r)}}()}})(timbre);