(function(e){"use strict";function t(t){e.Object.call(this,1,t),n.fixAR(this);var r=this._;r.freq=e(100),r.gain=e(2),r.sr=e.samplerate,r.t=1/r.sr,r.b0=r.a1=r.wcD=0,r.s1=r.s2=r.s3=r.s4=0}var n=e.fn;n.extend(t);var r=t.prototype;Object.defineProperties(r,{freq:{set:function(t){this._.freq=e(t)},get:function(){return this._.freq}},gain:{set:function(t){this._.gain=e(t)},get:function(){return this._.gain}}}),r.bang=function(){var e=this._;return e.s1=e.s2=e.s3=e.s4=0,e.emit("bang"),this},r.process=function(e){var t=this.cells[0],r=this._;if(this.tickID!==e){this.tickID=e,n.inputSignalAR(this);var i=r.gain.process(e).cells[0][0];i=i>4?4:0>i?0:i;var s,o,a,c,u,f,l,h,d=r.s1,p=r.s2,v=r.s3,y=r.s4,b=r.freq.process(e).cells[0][0],g=r.t,_=r.wcD,m=r.a1,w=r.b0,k=t.length;for(r.prevFreq!==b&&(r.prevFreq=b,_=2*Math.tan(g*Math.PI*b)*r.sr,0>_&&(_=0),s=g*_,w=s/(s+2),m=(s-2)/(s+2),r.b0=w,r.a1=m,r.wcD=_),h=0;k>h;++h)o=y+w*(v+w*(p+w*d)),f=t[h],l=(w*w*w*w*f+o)/(1+w*w*w*w*i),t[h]=100*l,a=f-i*l,c=a,u=w*c+d,d=w*c-m*u,u=w*c+p,p=w*c-m*u,c=u,u=w*c+v,v=w*c-m*u,y=w*u-m*l;for(r.s1=d,r.s2=p,r.s3=v,r.s4=y,h=0;k>h;++h)o=t[h],t[h]=-1>o?-1:o>1?1:o;n.outputSignalAR(this)}return this},n.register("MoogFF",t)})(timbre);